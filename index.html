<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BMI Calculator</title>
  <style>
    :root {
      --bg: #0f172a;         /* slate-900 */
      --card: #111827;       /* gray-900 */
      --muted: #94a3b8;      /* slate-400 */
      --text: #e5e7eb;       /* gray-200 */
      --primary: #6366f1;    /* indigo-500 */
      --ring: #22d3ee;       /* cyan-400 */
      --ok: #22c55e;         /* green-500 */
      --warn: #f59e0b;       /* amber-500 */
      --bad: #ef4444;        /* red-500 */
      --info: #38bdf8;       /* sky-400 */
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: radial-gradient(1200px 600px at 10% -10%, #1f2937 0%, var(--bg) 60%);
      color: var(--text); font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
      display: grid; place-items: center; padding: 24px;
    }
    .app { width: 100%; max-width: 680px; background: linear-gradient(180deg, #0b1220, var(--card)); border: 1px solid #1f2937;
      border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.35); overflow: hidden; }
    header { padding: 20px 22px; border-bottom: 1px solid #1f2937; display: flex; gap: 12px; align-items: center; }
    header h1 { font-size: 20px; margin: 0; letter-spacing:.2px; }
    header .badge { font-size: 12px; color: var(--muted); border: 1px solid #243244; padding: 2px 8px; border-radius: 999px; }

    .content { display: grid; grid-template-columns: 1fr; gap: 18px; padding: 22px; }

    .field { display: grid; gap: 6px; }
    .label { color: var(--muted); font-size: 14px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 520px) { .row { grid-template-columns: 1fr; } }

    input[type="number"], select {
      width: 100%; background: #0b1323; color: var(--text); border: 1px solid #243244; border-radius: 12px;
      padding: 12px 14px; outline: none; transition: box-shadow .15s, border-color .15s;
    }
    input[type="number"]:focus, select:focus { border-color: var(--ring); box-shadow: 0 0 0 4px rgba(34,211,238,.15); }
    input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

    .actions { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 6px; }
    button {
      background: var(--primary); color: white; border: 0; padding: 12px 16px; border-radius: 12px; font-weight: 600; cursor: pointer;
      transition: transform .04s ease, filter .15s ease; letter-spacing:.2px;
    }
    button.secondary { background: transparent; color: var(--text); border: 1px solid #263245; }
    button:hover { filter: brightness(1.07); }
    button:active { transform: translateY(1px); }

    .result { border-top: 1px dashed #243244; padding-top: 16px; display: grid; gap: 10px; }
    .metric { color: var(--muted); font-size: 14px; }

    .chips { display: flex; gap: 8px; flex-wrap: wrap; }
    .chip {
      font-size: 12px; padding: 6px 10px; border-radius: 999px; border: 1px solid #2a3a52; color: var(--text); background: #0b1323;
    }
    .chip.info { border-color: #0c2740; color: #a5e9ff; }
    .chip.good { background: rgba(34,197,94,.12); border-color: rgba(34,197,94,.45); color: #a7f3d0; }
    .chip.warn { background: rgba(245,158,11,.12); border-color: rgba(245,158,11,.45); color: #fde68a; }
    .chip.bad { background: rgba(239,68,68,.12); border-color: rgba(239,68,68,.45); color: #fecaca; }

    .error { color: #fecaca; background: rgba(239,68,68,.1); border: 1px solid rgba(239,68,68,.35); padding: 10px 12px; border-radius: 10px; display:none; }

    footer { padding: 18px 22px; border-top: 1px solid #1f2937; color: var(--muted); font-size: 13px; display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; }
    a { color: #93c5fd; text-decoration: none; }
  </style>
</head>
<body>
  <main class="app" role="application">
    <header>
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 20c0-2.761 2.239-5 5-5h2c2.761 0 5 2.239 5 5" stroke="#7dd3fc" stroke-width="1.5"/><circle cx="12" cy="8" r="3" stroke="#a5b4fc" stroke-width="1.5"/></svg>
      <h1>Body Mass Index (BMI) Calculator</h1>
    </header>

    <section class="content">
      <div class="field">
        <label class="label" for="unit">Unit</label>
        <select id="unit" aria-label="Choose unit system">
          <option value="metric" selected>Metric (kg, cm)</option>
          <option value="imperial">Imperial (lb, ft/in)</option>
        </select>
      </div>

      <div id="metricFields" class="row" aria-live="polite">
        <div class="field">
          <label class="label" for="kg">Weight (kg)</label>
          <input id="kg" type="number" inputmode="decimal" placeholder="e.g., 70" min="10" max="300" step="0.1" />
        </div>
        <div class="field">
          <label class="label" for="cm">Height (cm)</label>
          <input id="cm" type="number" inputmode="decimal" placeholder="e.g., 170" min="50" max="250" step="0.1" />
        </div>
      </div>

      <div id="imperialFields" class="row" style="display:none" aria-live="polite">
        <div class="field">
          <label class="label" for="lb">Weight (lb)</label>
          <input id="lb" type="number" inputmode="decimal" placeholder="e.g., 154" min="22" max="660" step="0.1" />
        </div>
        <div class="row" style="gap:12px; grid-template-columns: 1fr 1fr;">
          <div class="field">
            <label class="label" for="ft">Height (ft)</label>
            <input id="ft" type="number" inputmode="numeric" placeholder="e.g., 5" min="1" max="8" step="1" />
          </div>
          <div class="field">
            <label class="label" for="inch">Height (in)</label>
            <input id="inch" type="number" inputmode="numeric" placeholder="e.g., 7" min="0" max="11" step="1" />
          </div>
        </div>
      </div>

      <div id="error" class="error" role="alert"></div>

      <div class="actions">
        <button id="calcBtn" type="button">Calculate BMI</button>
        <button id="resetBtn" type="button" class="secondary">Reset</button>
      </div>

      <div id="result" class="result" aria-live="polite" aria-atomic="true">
        <div class="metric">Enter your details and hit <strong>Calculate BMI</strong>.</div>
      </div>
    </section>

    <footer>
      <div>Categories follow WHO ranges (Underweight, Normal, Overweight, Obesity).</div>
      <div><a href="#" id="shareLink">Copy link</a></div>
    </footer>
  </main>

  <script>
    const unitSelect = document.getElementById('unit');
    const metricFields = document.getElementById('metricFields');
    const imperialFields = document.getElementById('imperialFields');
    const errorBox = document.getElementById('error');
    const resultBox = document.getElementById('result');
    const shareLink = document.getElementById('shareLink');

    unitSelect.addEventListener('change', () => {
      const u = unitSelect.value;
      metricFields.style.display = u === 'metric' ? '' : 'none';
      imperialFields.style.display = u === 'imperial' ? '' : 'none';
      clearUI();
    });

    document.getElementById('calcBtn').addEventListener('click', () => {
      hideError();
      const unit = unitSelect.value;
      try {
        let kg, m; // normalize to metric for calculation
        if (unit === 'metric') {
          const w = num(document.getElementById('kg').value);
          const hcm = num(document.getElementById('cm').value);
          guardRange(w, 10, 300, 'Weight (kg) should be 10–300.');
          guardRange(hcm, 50, 250, 'Height (cm) should be 50–250.');
          kg = w; m = hcm / 100;
        } else {
          const lb = num(document.getElementById('lb').value);
          const ft = num(document.getElementById('ft').value);
          const inch = num(document.getElementById('inch').value);
          guardRange(lb, 22, 660, 'Weight (lb) should be 22–660.');
          guardRange(ft, 1, 8, 'Height (ft) should be 1–8.');
          guardRange(inch, 0, 11, 'Height (in) should be 0–11.');
          const totalIn = ft * 12 + inch;
          if (totalIn <= 0) throw new Error('Height cannot be zero.');
          // convert imperial to metric
          kg = lb * 0.45359237;
          m  = totalIn * 0.0254;
        }

        const bmi = +(kg / (m * m)).toFixed(2);
        const cat = category(bmi);

        // healthy weight range for this height
        const minKg = 18.5 * m * m;
        const maxKg = 24.9 * m * m;

        // show
        renderResult({ unit: unit, bmi, cat, minKg, maxKg });
      } catch (e) {
        showError(e.message || 'Please check your inputs.');
      }
    });

    document.getElementById('resetBtn').addEventListener('click', () => {
      document.querySelectorAll('input').forEach(i => i.value = '');
      clearUI();
    });

    shareLink.addEventListener('click', (e) => {
      e.preventDefault();
      const url = location.href; // works when hosted
      navigator.clipboard?.writeText(url).then(() => {
        shareLink.textContent = 'Copied!';
        setTimeout(() => shareLink.textContent = 'Copy link', 1200);
      }).catch(() => {
        alert('Copy failed. You can manually copy the address bar URL.');
      });
    });

    function num(v){
      const n = Number(v);
      if (!isFinite(n)) throw new Error('All fields must be numbers.');
      return n;
    }
    function guardRange(v, min, max, msg){
      if (isNaN(v)) throw new Error(msg);
      if (v < min || v > max) throw new Error(msg);
    }
    function category(bmi){
      if (bmi < 18.5) return { name: 'Underweight', cls: 'info' };
      if (bmi < 25)   return { name: 'Normal weight', cls: 'good' };
      if (bmi < 30)   return { name: 'Overweight', cls: 'warn' };
      return { name: 'Obesity', cls: 'bad' };
    }
    function renderResult({ unit, bmi, cat, minKg, maxKg }){
      const weightRange = unit === 'metric'
        ? `${minKg.toFixed(1)}–${maxKg.toFixed(1)} kg`
        : `${(minKg*2.20462).toFixed(1)}–${(maxKg*2.20462).toFixed(1)} lb`;

      resultBox.innerHTML = `
        <div class="chips">
          <span class="chip">BMI: <strong>${bmi}</strong></span>
          <span class="chip ${cat.cls}">${cat.name}</span>
          <span class="chip info">Healthy weight: ${weightRange}</span>
        </div>
        <div class="metric">The healthy range is calculated using BMI 18.5–24.9 for your height.</div>
      `;
    }
    function showError(msg){ errorBox.style.display='block'; errorBox.textContent = msg; }
    function hideError(){ errorBox.style.display='none'; errorBox.textContent=''; }
    function clearUI(){ hideError(); resultBox.innerHTML = '<div class="metric">Enter your details and hit <strong>Calculate BMI</strong>.</div>'; }
  </script>
</body>
</html>
